{"version":3,"sources":["../../src/models/index.js"],"names":["url","getMongoUrl","mongoose","connect","useNewUrlParser","db","console","log","model","connectDB","close","closeDBconnection","getDB","user","pass","Error"],"mappings":";;;;;;;;qEAaO;AAAA;AAAA;AAAA;AAAA;AAAA;AACCA,eADD,GACOC,aADP;AAAA;AAAA;AAAA,mBAGQC,mBAASC,OAAT,CAAiBH,GAAjB,EAAsB,EAAEI,iBAAiB,IAAnB,EAAtB,CAHR;;AAAA;AAGHC,cAHG;;AAIHC,oBAAQC,GAAR,CAAY,kBAAZ;AACAD,oBAAQC,GAAR,CAAYF,GAAGG,KAAH,CAAS,MAAT,CAAZ;AALG;AAAA;;AAAA;AAAA;AAAA;;AAOHF,oBAAQC,GAAR;;AAPG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,G;;kBAAeE,S;;;;;;sEAgBf;AAAA;AAAA;AAAA;AAAA;AAAA,gBACAJ,EADA;AAAA;AAAA;AAAA;;AAAA;;AAAA;AAAA;AAAA,mBAECA,GAAGK,KAAH,CAAS,IAAT,CAFD;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,G;;kBAAeC,iB;;;;;QALNC,K,GAAAA,K;;AAxBhB;;;;AACA;;;;;;AAEA,IAAIP,WAAJ;;AAEA,SAASJ,WAAT,GAAwB;AACtB,MAAMD,MAAM,yCAAZ;AACA,MAAMa,OAAO,SAAb;AACA,MAAMC,OAAO,YAAb;;AAEA,wBAAoBD,IAApB,SAA4BC,IAA5B,SAAoCd,GAApC;AACD;;AAaM,SAASY,KAAT,GAAkB;AACvB,MAAI,CAACP,EAAL,EAAS,MAAM,IAAIU,KAAJ,CAAU,GAAV,EAAe,2BAAf,CAAN;AACT,SAAOV,EAAP;AACD","file":"index.js","sourcesContent":["import mongoose from 'mongoose'\nimport {DB_URL, DB_USER, DB_PASSWORD} from '../conf/db'\n\nlet db\n\nfunction getMongoUrl () {\n  const url = 'ds131983.mlab.com:31983/heroku_ph19r4wb'\n  const user = 'swagger'\n  const pass = 'abc1234567'\n\n  return `mongodb://${user}:${pass}@${url}`\n}\n\nexport async function connectDB () {\n  const url = getMongoUrl()\n  try{\n    db = await mongoose.connect(url, { useNewUrlParser: true })\n    console.log('DB connection OK')\n    console.log(db.model('User'))\n  } catch(error){\n    console.log(error)\n  }\n}\n\nexport function getDB () {\n  if (!db) throw new Error(500, 'Database connection error')\n  return db\n}\n\nexport async function closeDBconnection () {\n  if (!db) return\n  await db.close(true)\n}\n\n"]}