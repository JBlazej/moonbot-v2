{"version":3,"sources":["../../src/models/index.js"],"names":["url","getMongoUrl","mongoose","connect","useNewUrlParser","db","console","log","connectDB","close","closeDBconnection","getDB","DB_URL","user","DB_USER","pass","DB_PASSWORD","Error"],"mappings":";;;;;;;;qEAaO;AAAA;AAAA;AAAA;AAAA;AAAA;AACCA,eADD,GACOC,aADP;AAAA;AAAA;AAAA,mBAGQC,mBAASC,OAAT,CAAiBH,GAAjB,EAAsB,EAAEI,iBAAiB,IAAnB,EAAtB,CAHR;;AAAA;AAGHC,cAHG;;AAIHC,oBAAQC,GAAR,CAAY,kBAAZ;AAJG;AAAA;;AAAA;AAAA;AAAA;;AAMHD,oBAAQC,GAAR;;AANG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,G;;kBAAeC,S;;;;;;sEAef;AAAA;AAAA;AAAA;AAAA;AAAA,gBACAH,EADA;AAAA;AAAA;AAAA;;AAAA;;AAAA;AAAA;AAAA,mBAECA,GAAGI,KAAH,CAAS,IAAT,CAFD;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,G;;kBAAeC,iB;;;;;QALNC,K,GAAAA,K;;AAvBhB;;;;AACA;;;;;;AAEA,IAAIN,WAAJ;;AAEA,SAASJ,WAAT,GAAwB;AACtB,MAAMD,MAAMY,UAAZ;AACA,MAAMC,OAAOC,WAAb;AACA,MAAMC,OAAOC,eAAb;;AAEA,wBAAoBH,IAApB,SAA4BE,IAA5B,SAAoCf,GAApC;AACD;;AAYM,SAASW,KAAT,GAAkB;AACvB,MAAI,CAACN,EAAL,EAAS,MAAM,IAAIY,KAAJ,CAAU,GAAV,EAAe,2BAAf,CAAN;AACT,SAAOZ,EAAP;AACD","file":"index.js","sourcesContent":["import mongoose from 'mongoose'\nimport {DB_URL, DB_USER, DB_PASSWORD} from '../conf/db'\n\nlet db\n\nfunction getMongoUrl () {\n  const url = DB_URL\n  const user = DB_USER\n  const pass = DB_PASSWORD\n\n  return `mongodb://${user}:${pass}@${url}`\n}\n\nexport async function connectDB () {\n  const url = getMongoUrl()\n  try{\n    db = await mongoose.connect(url, { useNewUrlParser: true })\n    console.log('DB connection OK')\n  } catch(error){\n    console.log(error)\n  }\n}\n\nexport function getDB () {\n  if (!db) throw new Error(500, 'Database connection error')\n  return db\n}\n\nexport async function closeDBconnection () {\n  if (!db) return\n  await db.close(true)\n}\n\n"]}