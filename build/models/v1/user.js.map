{"version":3,"sources":["../../../src/models/v1/user.js"],"names":["model","UserSchema","find","user","getUserAll","id","getUserById","from","to","utcTimeAndDate","data","station","time","findOneAndUpdate","new","modifyUserById","param","hacker","setHackerNews","updateUserById","User","help","length","save","createNewUser","mongoose","Schema","type","String","unique","lowercase","required","created","Date","default","now","Boolean"],"mappings":"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","file":"user.js","sourcesContent":["import mongoose from 'mongoose'\nimport {getDB} from '..'\n\n// USERS SCHEMA\n// -----------------------------------------------------------------------------\nexport const UserSchema = new mongoose.Schema({\n  id: {\n    type: String,\n    unique: true,\n    lowercase: true,\n    required: true\n  },\n  created: {\n    type: Date,\n    default: Date.now\n  },\n  station: {\n      from: {\n          type: String,\n          default: 'volha'\n      },\n      to: {\n          type: String,\n          default: 'husinecka'\n      },\n      time: {\n          type: Date,\n          default: Date.now\n      }\n  },\n  hacker: {\n      type: Boolean,\n      default: false\n  }\n})\n\nexport async function getUserAll () {\n    const user = await getDB().model('User', UserSchema).find({})\n\n    return user\n}\n\nexport async function getUserById (id) {\n    const user = await getDB().model('User', UserSchema).find({\"id\": id})\n    \n    return user\n  }\n\nexport async function modifyUserById (id, from, to, utcTimeAndDate) {\n    let data = {\n        station: {\n            from : from,\n            to : to,\n            time : utcTimeAndDate\n        }\n    }\n\n    const user = await getDB().model('User', UserSchema).findOneAndUpdate({id : id}, data, {new : true})\n    \n    return user\n}\n\nexport async function setHackerNews(id, param){\n    let data = {\n        hacker : param\n    }\n\n    const user = await getDB().model('User', UserSchema).findOneAndUpdate({id : id}, data, {new : true})\n    \n    return user\n}\n\nsetHackerNews('1959622390785359', true)\n\nexport async function updateUserById (id) {\n    let data = {\n        id : id\n    }\n\n    const user = await getDB().model('User', UserSchema).findOneAndUpdate({id : id}, data, {new: true})\n    \n    return user\n}\n\nexport async function createNewUser (id) {\n    const User = await getDB().model('User', UserSchema)\n    const user = new User({id : id})\n\n    const help = await getUserById(id)\n\n    if(help.length === 0) {\n        user.save()\n        return user\n    } else {\n        updateUserById(id)\n    }\n}"]}