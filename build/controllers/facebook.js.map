{"version":3,"sources":["../../src/controllers/facebook.js"],"names":["req","res","VERIFY_TOKEN","mode","query","token","challenge","status","send","sendStatus","facebookVerificationHook","body","object","entry","forEach","messaging","event","webhook_event","console","log","message","postback","facebookEventHook"],"mappings":";;;;;;;uEACO,iBAAyCA,GAAzC,EAA8CC,GAA9C;AAAA;AAAA;AAAA;AAAA;AAAA;AACJ;AACIC,oCAFA,GAEe,kBAFf;;AAIJ;;AACIC,4BALA,GAKOH,IAAII,KAAJ,CAAU,UAAV,CALP;AAMAC,6BANA,GAMQL,IAAII,KAAJ,CAAU,kBAAV,CANR;AAOAE,iCAPA,GAOYN,IAAII,KAAJ,CAAU,eAAV,CAPZ;;AASJ;;AACA,4BAAID,QAAQE,KAAZ,EAAmB;AACjB,gCAAIF,SAAS,WAAT,IAAwBE,UAAUH,YAAtC,EAAoD;;AAElDD,oCAAIM,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqBF,SAArB;AACD,6BAHD,MAGO;AACLL,oCAAIQ,UAAJ,CAAe,GAAf;AACD;AACF;;AAjBG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,K;;oBAAgBC,wB;;;;;;wEAoBhB,kBAAiCV,GAAjC,EAAsCC,GAAtC;AAAA;AAAA;AAAA;AAAA;AAAA;AACCU,4BADD,GACQX,IAAIW,IADZ;;;AAGH,4BAAIA,KAAKC,MAAL,KAAgB,MAApB,EAA4B;AACxB;AACAD,iCAAKE,KAAL,CAAWC,OAAX,CAAmB,UAASD,KAAT,EAAgB;AAC/BA,sCAAME,SAAN,CAAgBD,OAAhB,CAAwB,UAAUE,KAAV,EAAiB;AACrC;AACA,wCAAIC,gBAAgBD,KAApB;;AAEAE,4CAAQC,GAAR,CAAYF,cAAcG,OAA1B;AACAF,4CAAQC,GAAR,CAAYF,cAAcI,QAA1B;AACH,iCAND;AAOH,6BARD;AASApB,gCAAIM,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB,gBAArB;AACH,yBAZD,MAYO;AACHP,gCAAIQ,UAAJ,CAAe,GAAf;AACH;;AAjBE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,K;;oBAAea,iB","file":"facebook.js","sourcesContent":["\nexport async function  facebookVerificationHook(req, res) {\n   // Your verify token. Should be a random string.\n   let VERIFY_TOKEN = \"TriPrsaNaHrudi89\"\n     \n   // Parse the query params\n   let mode = req.query['hub.mode']\n   let token = req.query['hub.verify_token']\n   let challenge = req.query['hub.challenge']\n     \n   // Checks if a token and mode is in the query string of the request\n   if (mode && token) {\n     if (mode === 'subscribe' && token === VERIFY_TOKEN) {\n         \n       res.status(200).send(challenge)\n     } else {\n       res.sendStatus(403);    \n     }\n   }\n}\n\nexport async function facebookEventHook(req, res){\n    let body = req.body\n\n    if (body.object === 'page') {\n        // Iterates over each entry - there may be multiple if batched\n        body.entry.forEach(function(entry) {\n            entry.messaging.forEach(function (event) {\n                //let webhook_event = entry.messaging[0]\n                let webhook_event = event\n\n                console.log(webhook_event.message)\n                console.log(webhook_event.postback)\n            })  \n        })\n        res.status(200).send('EVENT_RECEIVED')\n    } else {\n        res.sendStatus(404)\n    }\n}\n"]}